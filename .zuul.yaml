- project:
    name: rcarrillocruz-org/ansible-fork
    check:
      jobs:
        - run-openvswitch-integration-tests
        - run-vyos-integration-tests
        - network-integration-tests-nxos

- job:
    name: run-openvswitch-integration-tests
    files:
      - ^lib/ansible/modules/network/ovs/.*$
      - ^test/integration/targets/openvswitch.*
      - ^playbooks/run-openvswitch-integration-tests/.*$
    run: playbooks/run-openvswitch-integration-tests/run.yaml
    nodeset:
      nodes:
        - name: bastion
          label: ubuntu-xenial
        - name: openvswitch
          label: ubuntu-xenial
    vars:
      platform: openvswitch

- job:
    name: run-vyos-integration-tests
    files:
      - ^lib/ansible/modules/network/vyos/.*$
      - ^test/integration/targets/vyos.*
      - ^playbooks/run-vyos-integration-tests/.*$
    run: playbooks/run-vyos-integration-tests/run.yaml
    nodeset:
      nodes:
        - name: bastion
          label: ubuntu-xenial
        - name: vyos
          label: vyos-1.1.7
    vars:
      platform: vyos

- job:
    name: network-integration-tests-nxos
    files:
      - ^lib/ansible/modules/network/nxos/.*$
      - ^test/integration/targets/nxos.*
      - ^playbooks/network-integration-tests-nxos/.*$
    run: playbooks/network-integration-tests-nxos/run.yaml
    nodeset:
      nodes:
        - name: bastion
          label: ubuntu-xenial
        - name: nxos
          label: nxos-7.0.3.I5.1
    vars:
      test_platform: nxos
      test_port: 8022
      test_custom_options:
        cli:
          transport: cli
